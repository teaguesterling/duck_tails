# name: test/sql/test_git_read.test
# group: [sql]

# Test non-LATERAL git_read
# Use __BUILD_DIRECTORY__ to ensure we load the freshly built extension
statement ok
SET extension_directory='__BUILD_DIRECTORY__/repository';

statement ok
LOAD duck_tails;

# Non-LATERAL git_read function  
query I
SELECT LENGTH(text) > 0 as has_content
FROM git_read('README.md', repo_path => 'test/tmp/main-repo');
----
true

# git_read with git:// URI format
query I
SELECT LENGTH(text) > 0 as has_content
FROM git_read('git://test/tmp/main-repo/README.md@HEAD');
----
true